[pytest]
# ----------------------------------------------------------
# Author: Nandan Kumar
# Project: IS601_Assignment5 - Enhanced Calculator
# Purpose: Stable, non-blocking pytest configuration
# ----------------------------------------------------------

# Directory where test discovery starts
testpaths = tests

# Extra options for reliable, quiet, and safe test execution
addopts = 
    --cov=app 
    --cov-report=term-missing 
    --cov-report=html 
    --maxfail=1 
    --disable-warnings 
    -q 
    --tb=short

# Automatically discover test file patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Timeout: prevents REPL or infinite loop hangs during pytest
timeout = 5
timeout_method = thread
timeout_func_only = true

# Test markers for optional grouping
markers =
    slow: marks tests as slow (deselect with "-m 'not slow'")
    fast: marks tests as fast (deselect with "-m 'not fast'")
    repl: marks REPL-related tests (skip in CI if needed)

# Logging configuration â€” useful for debugging failed tests
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(message)s
log_cli_date_format = %H:%M:%S

# Ensure pytest exits cleanly (important for REPL/subprocess tests)
faulthandler_timeout = 10
